# Warning: Do not edit this file.
# All configuration changes should be made through Control Center or the CLI mode.
if [ -z ${read_rc_defaults} ]
then
    for i in /usr/local/sandvine/etc/rc.conf.default*
    do
        if [ -f $i ]
        then
            . $i
        fi
    done
fi
read_rc_defaults="YES"
install_base=/usr/local/sandvine
# Change defaults below this line

SVSUPPORT=none@localhost

# Content from:
# - https://git.sandvine.rocks/sandvine/blank-config/src/master/pts/rc.conf
powerview_enabled="true"

spb_servers={{ spb_srvc_ip }}

cluster_name="{{ cluster_name }}"
cluster_stat_name="{{ cluster_name }}"

# Lower RAM requirements
hal_maxFlows=100000
ptsm_numHugePages=256

# License Server
{% if release == 'prod' %}
#license_server_primary="{{ license_server }}"
{% endif %}
{% if release == 'dev' %}
license_server_primary="{{ license_server }}"
{% endif %}

# Linux PTS config
SetPort os-control 1-1 {{ pts_set_port_control_1_1 }}
SetPort os-service 1-2 {{ pts_set_port_service_1_2 }}

SetPort fastpath 1-3 {{ pts_set_port_fastpath_1_3 }}
SetPort fastpath 1-4 {{ pts_set_port_fastpath_1_4 }}

SetPortEnable 1-3
SetPortEnable 1-4

SetPortRoleFunction 1-3 subscriber
SetPortRoleFunction 1-4 internet

SetPortBridgeGroup 1-3 1
SetPortBridgeGroup 1-4 1

{% if setup_mode == 'cloud-services' %}
diameter_stack_limitInMessageRate="false"
diameter_stack_limitOutMessageRate="false"
diameter_stack_enableCreationFailureLogging="true"
diameter_stack_maxOutgoingPendingRequests=16000
diameter_stack_maxOutgoingPerPeerMessages=2000
diameter_stack_maxOutgoingPerPeerBlockedMessages=2000
diameter_stack_pendingAnswerTimeoutMS=3000
diameter_stack_incomingMaxAgeEarlyThresholdMS=2000
diameter_stack_incomingMaxAgeThresholdIncrementMS=1000
diameter_stack_maxMessageSize=16384
diameter_stack_maxPerSessionBlockedMessages=32
skip_header_counting_mode="padding min64bytes"
ptsd_publicationInterval=60
{% endif %}
